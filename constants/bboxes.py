




relative_bboxes_rack_3 = {}



"""
1. Given only rack box (x,y), get all boxes.
1.1 For each rack: w, h are constants
1.2 For each box, w,h are constants
2. Given only xy (center), we can get all the other boxes
3. x_rack - x_box, y_rack - y_box


class_id, x, y, w, h
3 0.239734375 0.5228611111111111 0.1548984375 0.5709305555555555
0 0.1968515625 0.23484722222222223 0.056203125 0.05304166666666666
0 0.250421875 0.23961111111111114 0.0538359375 0.051444444444444445
0 0.2570703125 0.4043611111111111 0.059296875000000006 0.03929166666666666
0 0.2006015625 0.405 0.0527734375 0.04611111111111112
0 0.208875 0.5975416666666666 0.052117187499999995 0.04506944444444445
0 0.26301562500000003 0.5968611111111112 0.05728124999999999 0.04651388888888889
"""

def subtract_col_first_val(data):
    new_data = []
    for i in range(len(data)):
        new_row = [data[i][0]]
        for j in range(1,len(data[i])-2):
            if i == 0:
                new_row.append(data[i][j])
            else:
                new_row.append(data[i][j] - data[0][j])
        new_row.extend((data[i][-2], data[i][-1]))
        new_data.append(new_row)
    return new_data

def get_relative():
    for i in range(1, 5):
        with open(f"{i}.txt", "r") as f:
            lines = f.readlines()
            raw_data = [[float(x) for x in line.strip().split()] for line in lines]
            #raw_data = [line.strip().split() for line in lines]
            #raw_data = [[int(x) for x in sublist] for sublist in raw_data]
            relative_data = subtract_col_first_val(raw_data)
            print(i)
            print(relative_data)

get_relative()


data = [[3, 0.239734375, 0.5228611111111111, 0.1548984375, 0.5709305555555555],
        [0, 0.1968515625, 0.23484722222222223, 0.056203125, 0.05304166666666666],
        [0, 0.250421875, 0.23961111111111114, 0.0538359375, 0.051444444444444445],
        [0, 0.2570703125, 0.4043611111111111, 0.059296875000000006, 0.03929166666666666],
        [0, 0.2006015625, 0.405, 0.0527734375, 0.04611111111111112],
        [0, 0.208875, 0.5975416666666666, 0.052117187499999995, 0.04506944444444445],
        [0, 0.26301562500000003, 0.5968611111111112, 0.05728124999999999, 0.04651388888888889]]


rack_3_relative = [[3, 0.239734375, 0.5228611111111111, 0.1548984375, 0.5709305555555555],
          [0, -0.042882812500000006, -0.2880138888888889, 0.056203125, 0.05304166666666666],
          [0, 0.010687500000000016, -0.28325, 0.0538359375, 0.051444444444444445],
          [0, 0.01733593750000001, -0.1185, 0.059296875000000006, 0.03929166666666666],
          [0, -0.0391328125, -0.11786111111111108, 0.0527734375, 0.04611111111111112],
          [0, -0.030859374999999994, 0.07468055555555553, 0.052117187499999995, 0.04506944444444445],
          [0, 0.02328125000000003, 0.07400000000000007, 0.05728124999999999, 0.04651388888888889]]






rack_1_relative = [[1.0, 0.3061171875, 0.4972361111111111, 0.516921875, 0.67225],
                   [0.0, -0.0733359375, -0.12968055555555558, 0.0561875, 0.05177777777777778],
                   [0.0, -0.1329921875, -0.13041666666666663, 0.060312500000000005, 0.05309722222222222],
                   [0.0, -0.194859375, -0.13209722222222225, 0.066265625, 0.049708333333333334],
                   [0.0, -0.1677109375, -0.19594444444444442, 0.0596171875, 0.04979166666666667],
                   [0.0, -0.060695312500000015, -0.19780555555555557, 0.056460937499999996, 0.05441666666666667], [0.0, -0.11211718749999999, -0.19774999999999998, 0.0458046875, 0.04618055555555556], [0.0, -0.06553125000000001, -0.27459722222222216, 0.065546875, 0.053611111111111116], [0.0, -0.044843750000000016, -0.3004027777777778, 0.05535156249999999, 0.04088888888888889], [0.0, -0.10443750000000002, -0.30015277777777777, 0.0611796875, 0.044180555555555556], [0.0, -0.131859375, -0.27031944444444445, 0.067109375, 0.05170833333333333], [0.0, -0.202234375, -0.2731111111111111, 0.0655703125, 0.05658333333333333], [0.0, -0.167265625, -0.2980555555555555, 0.056734375000000004, 0.051430555555555556], [0.0, -0.190109375, -0.0033888888888888857, 0.0585859375, 0.05298611111111111], [0.0, -0.1715078125, -0.06443055555555555, 0.0472421875, 0.04223611111111111], [0.0, -0.1279453125, -0.005055555555555535, 0.054593749999999996, 0.05173611111111111], [0.0, -0.1158203125, -0.06145833333333334, 0.05846875, 0.043763888888888894], [0.0, -0.06719531249999999, -0.0065277777777777435, 0.0581015625, 0.05469444444444445], [0.0, -0.060453124999999996, -0.06322222222222218, 0.061640625000000004, 0.034708333333333334], [0.0, 0.08957812500000001, -0.13205555555555554, 0.06639062500000001, 0.055763888888888884], [0.0, 0.096703125, -0.1880972222222222, 0.0599921875, 0.037736111111111116], [0.0, 0.15775, -0.12791666666666662, 0.06446093750000001, 0.05301388888888889], [0.0, 0.219203125, -0.13077777777777772, 0.058734375000000005, 0.05043055555555556], [0.0, 0.21595312500000002, -0.18079166666666663, 0.054296875, 0.044013888888888894], [0.0, 0.15301562500000004, -0.17927777777777776, 0.055171875, 0.035902777777777777], [0.0, 0.08809374999999997, -0.27620833333333333, 0.0615859375, 0.05240277777777777], [0.0, 0.09690625000000003, -0.30719444444444444, 0.054484374999999995, 0.04119444444444444], [0.0, 0.15115624999999994, -0.2714861111111111, 0.0588984375, 0.051291666666666666], [0.0, 0.15439062500000006, -0.3049722222222222, 0.0600703125, 0.042875], [0.0, 0.2135546875, -0.3035833333333333, 0.056523437499999996, 0.04006944444444445], [0.0, 0.21316406249999992, -0.27643055555555557, 0.0645625, 0.05006944444444444], [0.0, 0.21467968750000005, -0.004930555555555549, 0.05996875, 0.05429166666666667], [0.0, 0.21534375, -0.06029166666666663, 0.0569921875, 0.043333333333333335], [0.0, 0.15900000000000003, -0.0667638888888889, 0.0521015625, 0.035944444444444446], [0.0, 0.15663281250000005, -0.009819444444444436, 0.051070312500000006, 0.058486111111111114], [0.0, 0.09097656249999997, -0.0036666666666666514, 0.0542578125, 0.05452777777777777], [0.0, 0.093796875, -0.05090277777777774, 0.052945312499999994, 0.05377777777777778], [0.0, -0.1258125, 0.10037499999999999, 0.059710937500000005, 0.043680555555555556], [0.0, -0.06389062499999998, 0.09459722222222222, 0.054609375, 0.057999999999999996], [0.0, -0.18899218750000002, 0.0975138888888889, 0.0641875, 0.04940277777777778], [0.0, -0.1705625, 0.056486111111111126, 0.053921874999999994, 0.035222222222222224], [0.0, -0.117140625, 0.05452777777777773, 0.0501796875, 0.029791666666666664], [0.0, -0.05715624999999999, 0.05104166666666665, 0.052078124999999996, 0.022875], [0.0, 0.09589843750000004, 0.10224999999999995, 0.05846875, 0.04548611111111111], [0.0, 0.09551562500000005, 0.042291666666666616, 0.0545390625, 0.03461111111111111], [0.0, 0.15582812499999998, 0.054916666666666725, 0.052671875, 0.03763888888888889], [0.0, 0.15190624999999996, 0.09765277777777781, 0.0698828125, 0.04631944444444445], [0.0, 0.2146015625, 0.10066666666666668, 0.056999999999999995, 0.05420833333333334], [0.0, 0.21471875, 0.054749999999999965, 0.055734375, 0.03730555555555556]]

rack_2_relative = [[2.0, 0.2989140625, 0.5183333333333333, 0.2115546875, 0.6199861111111111], [0.0, 0.05641406249999997, -0.22249999999999998, 0.05128125, 0.041652777777777775], [0.0, 0.004320312499999979, -0.2233194444444444, 0.0580390625, 0.04558333333333334], [0.0, -0.05871093750000003, -0.22943055555555553, 0.0663359375, 0.04723611111111111], [0.0, -0.05248437500000003, -0.2521527777777777, 0.0584921875, 0.03790277777777778], [0.0, 0.009867187499999985, -0.24812499999999998, 0.055070312499999996, 0.043180555555555555], [0.0, 0.06217187499999999, -0.24711111111111111, 0.04975, 0.041402777777777774], [0.0, 0.06903906249999997, -0.2683333333333333, 0.05159375000000001, 0.041666666666666664], [0.0, 0.01590625000000001, -0.26602777777777775, 0.043703124999999995, 0.04072222222222222], [0.0, -0.03773437500000004, -0.2625416666666667, 0.0567421875, 0.04215277777777778], [0.0, -0.06592187500000002, -0.030958333333333254, 0.058203125, 0.04747222222222222], [0.0, -0.0035703125000000058, -0.032611111111111035, 0.05475, 0.04923611111111111], [0.0, 0.06096874999999996, -0.032999999999999974, 0.058820312500000006, 0.051222222222222225], [0.0, 0.06807031250000001, -0.08334722222222218, 0.057406250000000006, 0.042194444444444444], [0.0, 0.011414062499999988, -0.07988888888888884, 0.05034375, 0.04911111111111111], [0.0, -0.05644531250000001, -0.076625, 0.06461718749999999, 0.03897222222222222], [0.0, 0.07604687499999996, -0.12393055555555549, 0.059296875000000006, 0.04158333333333333], [0.0, 0.015406249999999955, -0.12195833333333334, 0.0551953125, 0.03719444444444445], [0.0, -0.04903125, -0.11829166666666668, 0.076328125, 0.03065277777777778], [0.0, -0.056804687500000034, 0.09986111111111118, 0.06390625, 0.05581944444444444], [0.0, 0.008742187499999998, 0.09744444444444444, 0.06218749999999999, 0.050986111111111114], [0.0, 0.07386718749999999, 0.09673611111111113, 0.0580546875, 0.06068055555555555], [0.0, 0.07741406249999999, 0.05449999999999999, 0.0542109375, 0.03179166666666667], [0.0, 0.08114062500000002, 0.019444444444444486, 0.053859375, 0.03943055555555556], [0.0, 0.021414062499999942, 0.05052777777777773, 0.05940625000000001, 0.03772222222222222], [0.0, 0.02753906249999999, 0.016972222222222277, 0.0450859375, 0.03727777777777778], [0.0, -0.046734374999999995, 0.0512083333333333, 0.0641875, 0.0395], [0.0, -0.06212500000000004, 0.22487500000000005, 0.056382812500000004, 0.04754166666666666], [0.0, -0.053609375000000015, 0.17198611111111106, 0.048421874999999996, 0.04731944444444444], [0.0, -0.04100781250000002, 0.11345833333333333, 0.0423671875, 0.04415277777777778], [0.0, -0.03233593750000002, 0.06734722222222222, 0.037843749999999995, 0.03525], [0.0, -0.005101562500000045, 0.2263194444444444, 0.052992187499999996, 0.05791666666666667], [0.0, 0.004601562499999989, 0.17093055555555559, 0.0523359375, 0.04797222222222222], [0.0, 0.057742187499999986, 0.22526388888888893, 0.050812500000000003, 0.051680555555555556], [0.0, 0.06642187499999996, 0.1698333333333334, 0.0572421875, 0.04854166666666667], [0.0, 0.0074843749999999876, 0.1153333333333334, 0.0456171875, 0.045125000000000005], [0.0, 0.06362499999999999, 0.12033333333333329, 0.0532109375, 0.049916666666666665], [0.0, 0.01994531249999998, 0.06986111111111115, 0.036148437500000005, 0.03193055555555555], [0.0, 0.07622656249999998, 0.07511111111111113, 0.04246875, 0.042458333333333334]]

rack_3_relative = [[3.0, 0.239734375, 0.5228611111111111, 0.1548984375, 0.5709305555555555], [0.0, -0.042882812500000006, -0.2880138888888889, 0.056203125, 0.05304166666666666], [0.0, 0.010687500000000016, -0.28325, 0.0538359375, 0.051444444444444445], [0.0, 0.01733593750000001, -0.1185, 0.059296875000000006, 0.03929166666666666], [0.0, -0.0391328125, -0.11786111111111108, 0.0527734375, 0.04611111111111112], [0.0, -0.030859374999999994, 0.07468055555555553, 0.052117187499999995, 0.04506944444444445], [0.0, 0.02328125000000003, 0.07400000000000007, 0.05728124999999999, 0.04651388888888889]]

rack_4_relative = [[3.0, 0.1837734375, 0.4683611111111112, 0.194109375, 0.6922638888888889], [0.0, -0.06049218749999999, -0.3425277777777779, 0.0621953125, 0.05723611111111111], [0.0, 0.0014140625000000073, -0.3452638888888889, 0.0547578125, 0.04897222222222222], [0.0, 0.023773437500000022, -0.36190277777777785, 0.060406249999999995, 0.043472222222222225], [0.0, -0.0322734375, -0.36287500000000006, 0.056125, 0.04984722222222222], [0.0, -0.02735156250000001, -0.22804166666666673, 0.05190625, 0.04729166666666666], [0.0, 0.023390625000000026, -0.22376388888888893, 0.045578125000000004, 0.050305555555555555], [0.0, -0.040515625, -0.055875000000000064, 0.05254687500000001, 0.049972222222222216], [0.0, 0.008671875000000023, -0.0533333333333334, 0.0492890625, 0.04672222222222222], [0.0, 0.036031250000000015, -0.07743055555555556, 0.0458515625, 0.051319444444444445], [0.0, -0.02167187499999998, -0.08281944444444456, 0.050687499999999996, 0.05254166666666667], [0.0, 0.017968750000000006, 0.09588888888888886, 0.0581640625, 0.04518055555555556], [0.0, 0.04595312500000001, 0.05372222222222217, 0.0610078125, 0.044180555555555556], [0.0, -0.0374296875, 0.09222222222222215, 0.0520625, 0.04895833333333333], [0.0, -0.029132812499999994, 0.21740277777777767, 0.04678125, 0.04373611111111111], [0.0, -0.016249999999999987, 0.05602777777777773, 0.045984375, 0.046], [0.0, 0.027484375000000033, 0.21808333333333324, 0.047515625, 0.050652777777777776]]



